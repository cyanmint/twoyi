# Threetwi Server

This is the server component of the Threetwi project, a fork of [twoyi](https://github.com/twoyi/twoyi).

## About

The threetwi-server is a Rust-based container server that runs the Android container and exposes connections for display rendering via scrcpy.

**Note:** All files in this directory were generated by AI (GitHub Copilot) and are NOT APPLICABLE for copyright.

## Changes from Original Twoyi (since commit d3ce306)

### Version 3.5.5

#### New Server Component
- Complete Rust-based server for headless container operation
- Scrcpy integration for display rendering
- Fake gralloc device for capturing graphics from legacy ROMs
- Input system for touch and keyboard events

#### Profile Support
- Added `--profile` command line argument for profile identification
- Profile name is included in server info response to clients
- Allows running multiple container instances with different configurations

#### Command Line Arguments

```
twoyi-server [OPTIONS]

Options:
  -r, --rootfs <PATH>       Path to the rootfs directory
  -l, --loader <PATH>       Path to the loader library (libloader.so)
  -b, --bind <ADDRESS>      Address and port to bind for control connections (default: 0.0.0.0:8765)
  -a, --adb-address <ADDR>  ADB address and port for scrcpy connections (default: 0.0.0.0:5556)
  -W, --width <WIDTH>       Screen width (default: 1080)
  -H, --height <HEIGHT>     Screen height (default: 1920)
  -d, --dpi <DPI>           Screen DPI (default: 320)
  -v, --verbose <LEVEL>     Verbose level: "none", "v" (default), "vv"
  -s, --setup               Setup mode - start server without launching container
  -p, --profile <NAME>      Profile name for identification (default: "default")
```

## Building

```bash
cd server
./build_android.sh
```

## Files

All files in this directory were created by AI (GitHub Copilot):

- `src/main.rs` - Main server binary with control connections
- `src/framebuffer.rs` - Framebuffer capture and streaming
- `src/gralloc.rs` - Fake gralloc device implementation
- `src/input.rs` - Touch and keyboard input handling
- `Cargo.toml` - Rust package configuration
- `build_android.sh` - Android build script

## License

All code in this directory was generated by AI (GitHub Copilot) and is NOT APPLICABLE for copyright.
Original twoyi code is licensed under MPL-2.0.
